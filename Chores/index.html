<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adventure HQ - Max & Ari</title>
    <!-- The Magic Broom Icon for the App -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ§¹</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } }
        .animate-shake { animation: shake 0.5s; }
        @keyframes wiggle { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(-10deg); } 75% { transform: rotate(10deg); } }
        .animate-wiggle { animation: wiggle 0.5s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .animate-float { animation: float 3s ease-in-out infinite; }
        @keyframes spinStar { 0% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(180deg) scale(1.5); } 100% { transform: rotate(360deg) scale(1); } }
        @keyframes spinBeyblade { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes minecraftFall { 0% { transform: translateY(-100px) rotate(0deg) scale(0); opacity: 1; } 50% { transform: translateY(0px) rotate(180deg) scale(1.2); opacity: 1; } 100% { transform: translateY(50px) rotate(360deg) scale(0.8); opacity: 0.5; } }
        @keyframes fadeOut { 0% { opacity: 1; } 70% { opacity: 1; } 100% { opacity: 0; } }
        @keyframes explode { 0% { transform: scale(0) rotate(0deg); opacity: 1; } 50% { transform: scale(2) rotate(180deg); opacity: 1; } 100% { transform: scale(4) rotate(360deg); opacity: 0; } }
        @keyframes lightning { 0% { opacity: 0; transform: scaleY(0); } 10% { opacity: 1; transform: scaleY(1); } 20% { opacity: 0; } 100% { opacity: 0; } }
        
        @keyframes introSpin {
            0% { transform: rotate(-180deg) scale(0); opacity: 0; }
            100% { transform: rotate(360deg) scale(1); opacity: 1; }
        }
        .animate-intro-spin { animation: introSpin 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }

        body { margin: 0; background-color: #020617; color: white; font-family: sans-serif; overflow-x: hidden; }
        
        #loader { position: fixed; inset: 0; background: #020617; z-index: 9999; display: flex; align-items: center; justify-content: center; transition: opacity 0.8s; }
        .debug-panel { position: fixed; bottom: 10px; left: 10px; font-family: monospace; font-size: 10px; background: rgba(0,0,0,0.9); padding: 8px; border-radius: 8px; border: 1px solid #444; z-index: 10000; max-width: 280px; pointer-events: none; color: #aaa; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    </style>
</head>
<body>
    <div id="loader">
        <div class="text-center p-8">
            <div id="loader-spinner" class="inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400 mb-6"></div>
            <div id="loader-text" class="text-yellow-400 font-black tracking-widest uppercase text-xl animate-pulse">Initialising...</div>
        </div>
    </div>

    <div id="debug" class="debug-panel">Status: Running...</div>
    <div id="root"></div>

    <script type="module">
        const debug = (msg) => {
            console.log(`[AdventureHQ] ${msg}`);
            const el = document.getElementById('debug');
            if (el) el.innerText = `Status: ${msg}`;
        };

        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        import React, { useState, useEffect, useCallback, useMemo } from 'https://esm.sh/react@18.2.0';
        import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
        import { 
            CheckCircle2, Circle, Fish, Sword, Shield, Zap, Clock, Calendar, 
            Coins, Trophy, Pizza, Bomb, PiggyBank, ChevronRight, Target, 
            Sparkles, TreePine, Gift, Flame, Star, Heart, Rocket, Swords, Hexagon,
            Dog, Bone, Droplets, Stethoscope, ArrowRight, Timer, Box, Layout, Utensils
        } from 'https://esm.sh/lucide-react@0.284.0';

        const firebaseConfig = {
            apiKey: "AIzaSyAb2XwRcOmR7xppmwHEWGQEo6yzkNiJjR4",
            authDomain: "chores2-1ddb5.firebaseapp.com",
            projectId: "chores2-1ddb5",
            storageBucket: "chores2-1ddb5.firebasestorage.app",
            messagingSenderId: "311715173428",
            appId: "1:311715173428:web:0ffd7017be058310276661"
        };
        const appId = "chores2-1ddb5";

        const teethConfig = {
            apiKey: "AIzaSyDdFKVuP0dXbH4XCw_hLqlIvluJfutYnUQ",
            authDomain: "teeth2-3f73e.firebaseapp.com",
            projectId: "teeth2-3f73e",
            storageBucket: "teeth2-3f73e.firebasestorage.app",
            messagingSenderId: "245367626619",
            appId: "1:245367626619:web:c496a86089539bdb5fbbde"
        };
        const teethAppId = "teeth2-3f73e";

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let teethDb;
        try {
            const teethApp = initializeApp(teethConfig, "teethApp");
            teethDb = getFirestore(teethApp);
        } catch(e) { debug("Teeth Connection Pending..."); }

        const App = () => {
            const [user, setUser] = useState(null);
            const [currentTime, setCurrentTime] = useState(new Date());
            const [cloudStatus, setCloudStatus] = useState("connecting");
            
            const [maxVault, setMaxVault] = useState({ total: 0, goal: 20 });
            const [ariVault, setAriVault] = useState({ total: 0, goal: 20 });
            const [fishState, setFishState] = useState({ lastFed: 0 });
            
            const defaultDogState = { monty: 0, liath: 0, lastReset: '', montyLastFed: 0, liathLastFed: 0 };
            const [dogState, setDogState] = useState(defaultDogState);
            
            const [powerUpClaimed, setPowerUpClaimed] = useState(false);
            const [chessBonusClaimed, setChessBonusClaimed] = useState(false);
            const [inspecting, setInspecting] = useState(false);
            const [inspectionResult, setInspectionResult] = useState(null);

            const choreTemplate = [
                { id: 1, task: 'Clean Playroom', reward: 3, completed: false, emoji: 'ðŸŽ®' },
                { id: 2, task: 'Clean Bedroom', reward: 2, completed: false, emoji: 'ðŸ›ï¸' },
                { id: 3, task: 'Clean Family Room', reward: 1, completed: false, emoji: 'ðŸ›‹ï¸' },
                { id: 4, task: 'Clean Garden', reward: 4, completed: false, emoji: 'ðŸŒ³' },
            ];

            const [maxChores, setMaxChores] = useState([...choreTemplate]);
            const [ariChores, setAriChores] = useState([...choreTemplate]);
            const [particles, setParticles] = useState([]);
            const [shakeVault, setShakeVault] = useState({ max: false, ari: false });

            const isWeekend = currentTime.getDay() === 0 || currentTime.getDay() === 6;

            const hideLoader = useCallback(() => {
                const loader = document.getElementById('loader');
                if (loader) {
                    loader.style.opacity = '0';
                    setTimeout(() => loader.style.display = 'none', 800);
                }
            }, []);

            const getCountdown = () => {
                const now = currentTime;
                const daysUntilSat = (6 - now.getDay() + 7) % 7 || 7;
                const nextSat = new Date(now);
                nextSat.setDate(now.getDate() + daysUntilSat);
                nextSat.setHours(0, 0, 0, 0);
                const diff = nextSat - now;
                const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
                const m = Math.floor((diff / (1000 * 60)) % 60);
                const s = Math.floor((diff / 1000) % 60);
                return `${d}d ${h}h ${m}m ${s}s`;
            };

            useEffect(() => {
                debug("Running...");
                const safety = setTimeout(() => hideLoader(), 5000);
                signInAnonymously(auth).catch(() => { setCloudStatus("offline"); hideLoader(); });
                onAuthStateChanged(auth, (u) => { if (u) setUser(u); else hideLoader(); });
                const timer = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => { clearInterval(timer); clearTimeout(safety); };
            }, [hideLoader]);

            useEffect(() => {
                if (!user) return;
                const sharedDoc = doc(db, 'artifacts', appId);
                const unsubscribe = onSnapshot(sharedDoc, (snapshot) => {
                    setCloudStatus("online");
                    hideLoader();
                    if (snapshot.exists()) {
                        const data = snapshot.data();
                        if (data.maxVault) setMaxVault(data.maxVault);
                        if (data.ariVault) setAriVault(data.ariVault);
                        if (data.fishState) setFishState(data.fishState);
                        
                        if (data.dogState) {
                            const today = new Date().toISOString().split('T')[0];
                            if (data.dogState.lastReset !== today) {
                                setDogState({ ...defaultDogState, lastReset: today });
                            } else {
                                setDogState({ ...defaultDogState, ...data.dogState });
                            }
                        }

                        if (data.powerUpClaimed !== undefined) setPowerUpClaimed(data.powerUpClaimed);
                        if (data.chessBonusClaimed !== undefined) setChessBonusClaimed(data.chessBonusClaimed);
                        if (data.maxChores) setMaxChores(data.maxChores);
                        if (data.ariChores) setAriChores(data.ariChores);
                    } else hideLoader();
                }, () => hideLoader());
                return () => unsubscribe();
            }, [user, hideLoader]);

            const save = useCallback(async (updates) => {
                if (user && cloudStatus === "online") {
                    try {
                        const sharedDoc = doc(db, 'artifacts', appId);
                        await setDoc(sharedDoc, updates, { merge: true });
                    } catch (e) { debug("Sync Failed."); }
                }
            }, [user, cloudStatus]);

            const playSound = (type) => {
                try {
                    const ctx = new (window.AudioContext || window.webkitAudioContext)();
                    const osc = ctx.createOscillator();
                    const g = ctx.createGain();
                    osc.connect(g); g.connect(ctx.destination);
                    const t = ctx.currentTime;
                    if (type === 'complete') { osc.frequency.setValueAtTime(523, t); osc.frequency.exponentialRampToValueAtTime(783, t+0.1); g.gain.setValueAtTime(0.3, t); osc.start(); osc.stop(t+0.3); }
                    if (type === 'vault') { osc.frequency.setValueAtTime(392, t); osc.frequency.exponentialRampToValueAtTime(659, t+0.2); g.gain.setValueAtTime(0.4, t); osc.start(); osc.stop(t+0.4); }
                } catch(e) {}
            };

            const toggleChore = (boy, id) => {
                const list = boy === 'Max' ? maxChores : ariChores;
                const chore = list.find(c => c.id === id);
                const updated = list.map(c => c.id === id ? { ...c, completed: !c.completed } : c);
                if (!chore.completed) { 
                    playSound('complete'); 
                    const p = Array.from({ length: 12 }, (_, i) => ({ id: Date.now() + i, x: Math.random() * 100, y: Math.random() * 100, size: Math.random() * 20 + 10, emoji: 'â­' }));
                    setParticles(p); setTimeout(() => setParticles([]), 2000);
                }
                save({ [boy === 'Max' ? 'maxChores' : 'ariChores']: updated });
            };

            const bankEarnings = (boy) => {
                const list = boy === 'Max' ? maxChores : ariChores;
                const earned = list.reduce((acc, c) => c.completed ? acc + c.reward : acc, 0);
                if (earned === 0) return;
                playSound('vault');
                const vaultToUpdate = boy === 'Max' ? maxVault : ariVault;
                setShakeVault(prev => ({ ...prev, [boy.toLowerCase()]: true }));
                setTimeout(() => setShakeVault(prev => ({ ...prev, [boy.toLowerCase()]: false })), 600);
                save({
                    [boy === 'Max' ? 'maxVault' : 'ariVault']: { ...vaultToUpdate, total: vaultToUpdate.total + earned },
                    [boy === 'Max' ? 'maxChores' : 'ariChores']: choreTemplate.map(c => ({ ...c }))
                });
            };

            const feedFish = (who) => {
                const hoursSinceFed = (Date.now() - fishState.lastFed) / (1000 * 60 * 60);
                if (hoursSinceFed < 18) return; 
                playSound('complete');
                const updates = { fishState: { lastFed: Date.now() } };
                if (who === 'Max') updates.maxVault = { ...maxVault, total: maxVault.total + 0.5 };
                else updates.ariVault = { ...ariVault, total: ariVault.total + 0.5 };
                save(updates);
            };

            const feedDog = (dogName, who) => {
                const key = dogName.toLowerCase();
                if (dogState[key] >= 2) return;
                playSound('complete');
                const newState = { ...dogState };
                newState[key] += 1;
                newState[`${key}LastFed`] = Date.now();
                const updates = { dogState: newState };
                if (who === 'Max') updates.maxVault = { ...maxVault, total: maxVault.total + 0.5 };
                else updates.ariVault = { ...ariVault, total: ariVault.total + 0.5 };
                save(updates);
            };

            const clearTable = (who) => {
                playSound('complete');
                const updates = {};
                if (who === 'Max') updates.maxVault = { ...maxVault, total: maxVault.total + 0.25 };
                else updates.ariVault = { ...ariVault, total: ariVault.total + 0.25 };
                save(updates);
                // Particle burst for clearing table
                const p = Array.from({ length: 8 }, (_, i) => ({ id: Date.now() + i, x: 50 + (Math.random() - 0.5) * 40, y: 50 + (Math.random() - 0.5) * 40, size: 15, emoji: 'ðŸ½ï¸' }));
                setParticles(p); setTimeout(() => setParticles([]), 1500);
            };

            const getLastFedLabel = (ts) => {
                if (!ts) return '';
                const date = new Date(ts);
                const today = new Date();
                const isToday = date.toDateString() === today.toDateString();
                const timeStr = date.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' });
                return isToday ? `Today @ ${timeStr}` : `Last: ${timeStr}`;
            };

            const claimLegoBonus = () => {
                if (powerUpClaimed) return;
                playSound('complete');
                save({ 
                    powerUpClaimed: true, 
                    maxVault: { ...maxVault, total: maxVault.total + 0.5 }, 
                    ariVault: { ...ariVault, total: ariVault.total + 0.5 } 
                });
            };

            const claimChessBonus = () => {
                if (chessBonusClaimed) return;
                playSound('complete');
                save({ 
                    chessBonusClaimed: true, 
                    maxVault: { ...maxVault, total: maxVault.total + 0.5 }, 
                    ariVault: { ...ariVault, total: ariVault.total + 0.5 } 
                });
            };

            const runToothInspection = async () => {
                if (!teethDb || !isWeekend) return;
                setInspecting(true);
                try {
                    const docRef = doc(teethDb, `artifacts/${teethAppId}/public/data/battle_logs/global_doc`);
                    const snap = await getDoc(docRef);
                    if (snap.exists()) {
                        const logs = snap.data();
                        const results = { max: { hits: 0, doubles: 0, reward: 0 }, ari: { hits: 0, doubles: 0, reward: 0 } };
                        const today = new Date();
                        for(let i=0; i<7; i++) {
                            const d = new Date(); d.setDate(today.getDate() - i);
                            const key = d.toISOString().split('T')[0];
                            ['max', 'ari'].forEach(boy => {
                                if (logs[`${boy}-${key}-am`] || logs[`${boy}-${key}-pm`]) results[boy].hits++;
                                if (logs[`${boy}-${key}-am`] && logs[`${boy}-${key}-pm`]) results[boy].doubles++;
                            });
                        }
                        ['max', 'ari'].forEach(boy => {
                            if (results[boy].doubles >= 7) results[boy].reward = 3;
                            else if (results[boy].hits >= 7) results[boy].reward = 1;
                        });
                        setInspectionResult(results);
                        if (results.max.reward > 0 || results.ari.reward > 0) {
                            save({ 
                                maxVault: { ...maxVault, total: maxVault.total + results.max.reward },
                                ariVault: { ...ariVault, total: ariVault.total + results.ari.reward }
                            });
                        }
                    }
                } catch(e) {} finally { setInspecting(false); }
            };

            const isFishFedToday = (Date.now() - fishState.lastFed) / (1000 * 60 * 60) < 18;

            return React.createElement('div', { className: "min-h-screen bg-slate-950 p-4 pb-24 relative overflow-hidden text-slate-100" },
                particles.map(p => React.createElement('div', { key: p.id, className: "absolute pointer-events-none animate-ping z-50 text-2xl", style: { left: `${p.x}%`, top: `${p.y}%` } }, p.emoji)),

                React.createElement('header', { className: "bg-gradient-to-r from-emerald-800 to-emerald-900 p-8 rounded-[3rem] shadow-2xl mb-12 flex flex-col items-center border-b-8 border-emerald-950 text-center" },
                    React.createElement('div', { className: "relative mb-6 animate-intro-spin" },
                        React.createElement(Shield, { size: 80, className: "text-yellow-400 drop-shadow-[0_0_15px_rgba(250,204,21,0.5)]" }),
                        React.createElement(Sword, { size: 36, className: "absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-emerald-950 rotate-45" })
                    ),
                    React.createElement('h1', { className: "text-5xl md:text-6xl font-black italic tracking-tighter drop-shadow-lg uppercase" }, "Adventure HQ"),
                    React.createElement('p', { className: "text-emerald-300 text-xs font-black uppercase tracking-[0.4em] mt-2 opacity-80" }, "Max & Ari's Command Centre"),
                    React.createElement('div', { className: "mt-6 px-8 py-3 bg-black/40 rounded-full border border-white/10 backdrop-blur-md" },
                        React.createElement('span', { className: "text-cyan-400 font-mono text-xl font-bold" }, currentTime.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' })),
                        React.createElement('span', { className: "mx-4 text-slate-500" }, "|"),
                        React.createElement('span', { className: "text-slate-300 text-sm uppercase font-bold tracking-widest" }, currentTime.toLocaleDateString('en-GB', { weekday: 'long' }))
                    )
                ),

                React.createElement('section', { className: "grid grid-cols-1 md:grid-cols-2 gap-8 mb-12" },
                    [{ name: 'MAX', vault: maxVault, color: 'purple', progress: Math.min((maxVault.total/maxVault.goal)*100, 100), shake: shakeVault.max },
                     { name: 'ARI', vault: ariVault, color: 'orange', progress: Math.min((ariVault.total/ariVault.goal)*100, 100), shake: shakeVault.ari }
                    ].map(v => React.createElement('div', { key: v.name, className: `bg-${v.color}-900/20 border-4 border-${v.color}-500/50 rounded-[2.5rem] p-8 shadow-xl relative backdrop-blur-sm ${v.shake ? 'animate-shake' : ''}` },
                        React.createElement('div', { className: `absolute -top-4 ${v.name==='MAX'?'-left-4':'-right-4'} bg-${v.color}-600 text-white font-black px-6 py-1 rounded-xl border-2 border-white text-lg shadow-lg` }, v.name),
                        React.createElement('div', { className: "text-5xl font-black font-mono mb-4 text-center md:text-left" }, `â‚¬${v.vault.total.toFixed(2)}`),
                        React.createElement('div', { className: "h-6 bg-black/40 rounded-full overflow-hidden border border-white/5 p-1" },
                            React.createElement('div', { className: `h-full bg-gradient-to-r from-${v.color}-500 to-${v.color}-300 rounded-full transition-all duration-1000`, style: { width: `${v.progress}%` } })
                        )
                    ))
                ),

                React.createElement('section', { className: "bg-blue-900/20 border-4 border-blue-400/40 rounded-[3rem] p-8 shadow-2xl mb-12 relative overflow-hidden" },
                    React.createElement('h2', { className: "text-2xl font-black mb-8 flex items-center gap-3 text-blue-100 uppercase tracking-wider" }, 
                        React.createElement(Sparkles, { className: "text-blue-400 animate-float" }), "Daily Duties"
                    ),
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" },
                        React.createElement('div', { className: "bg-black/40 rounded-[2rem] p-6 border-2 border-blue-500/30 backdrop-blur-sm flex flex-col justify-between" },
                            React.createElement('div', null,
                                React.createElement('div', { className: "flex justify-between items-start mb-4" },
                                    React.createElement('div', { className: "text-xl font-black text-blue-200" }, "The Fish"),
                                    React.createElement('div', { className: `text-[10px] font-black uppercase px-2 py-1 rounded ${isFishFedToday ? 'bg-green-500' : 'bg-red-500 animate-pulse'}` }, isFishFedToday ? 'Fed' : 'Hungry!')
                                ),
                                isFishFedToday && React.createElement('p', { className: "text-[10px] text-green-400 font-mono font-bold mb-4" }, getLastFedLabel(fishState.lastFed))
                            ),
                            React.createElement('div', { className: "flex gap-2" },
                                React.createElement('button', { disabled: isFishFedToday, onClick: () => feedFish('Max'), className: "flex-1 bg-purple-700 disabled:opacity-30 py-2 rounded-xl text-[10px] font-black uppercase" }, "+50c Max"),
                                React.createElement('button', { disabled: isFishFedToday, onClick: () => feedFish('Ari'), className: "flex-1 bg-orange-700 disabled:opacity-30 py-2 rounded-xl text-[10px] font-black uppercase" }, "+50c Ari")
                            )
                        ),
                        React.createElement('div', { className: "bg-black/40 rounded-[2rem] p-6 border-2 border-slate-700 backdrop-blur-sm flex flex-col justify-between" },
                            React.createElement('div', null,
                                React.createElement('div', { className: "flex justify-between items-start mb-4" },
                                    React.createElement('div', { className: "text-xl font-black text-slate-200" }, "Monty"),
                                    React.createElement('div', { className: "text-[10px] font-black uppercase bg-slate-700 px-2 py-1 rounded" }, `${dogState.monty}/2 Fed`)
                                ),
                                dogState.montyLastFed > 0 && React.createElement('p', { className: "text-[10px] text-green-400 font-mono font-bold mb-4" }, getLastFedLabel(dogState.montyLastFed))
                            ),
                            React.createElement('div', { className: "flex gap-2" },
                                React.createElement('button', { disabled: dogState.monty >= 2, onClick: () => feedDog('Monty', 'Max'), className: "flex-1 bg-purple-700 disabled:opacity-30 py-2 rounded-xl text-[10px] font-black uppercase" }, "+50c Max"),
                                React.createElement('button', { disabled: dogState.monty >= 2, onClick: () => feedDog('Monty', 'Ari'), className: "flex-1 bg-orange-700 disabled:opacity-30 py-2 rounded-xl text-[10px] font-black uppercase" }, "+50c Ari")
                            )
                        ),
                        React.createElement('div', { className: "bg-black/40 rounded-[2rem] p-6 border-2 border-slate-700 backdrop-blur-sm flex flex-col justify-between" },
                            React.createElement('div', null,
                                React.createElement('div', { className: "flex justify-between items-start mb-4" },
                                    React.createElement('div', { className: "text-xl font-black text-slate-200" }, "Liath"),
                                    React.createElement('div', { className: "text-[10px] font-black uppercase bg-slate-700 px-2 py-1 rounded" }, `${dogState.liath}/2 Fed`)
                                ),
                                dogState.liathLastFed > 0 && React.createElement('p', { className: "text-[10px] text-green-400 font-mono font-bold mb-4" }, getLastFedLabel(dogState.liathLastFed))
                            ),
                            React.createElement('div', { className: "flex gap-2" },
                                React.createElement('button', { disabled: dogState.liath >= 2, onClick: () => feedDog('Liath', 'Max'), className: "flex-1 bg-purple-700 disabled:opacity-30 py-2 rounded-xl text-[10px] font-black uppercase" }, "+50c Max"),
                                React.createElement('button', { disabled: dogState.liath >= 2, onClick: () => feedDog('Liath', 'Ari'), className: "flex-1 bg-orange-700 disabled:opacity-30 py-2 rounded-xl text-[10px] font-black uppercase" }, "+50c Ari")
                            )
                        ),
                        React.createElement('div', { className: "bg-emerald-900/40 rounded-[2rem] p-6 border-2 border-emerald-500/50 backdrop-blur-sm flex flex-col justify-between" },
                            React.createElement('div', null,
                                React.createElement('div', { className: "flex justify-between items-start mb-4" },
                                    React.createElement('div', { className: "text-xl font-black text-emerald-200 flex items-center gap-2" }, React.createElement(Utensils, { size: 18 }), "Clear Table"),
                                    React.createElement('div', { className: "text-[10px] font-black uppercase bg-emerald-700 px-2 py-1 rounded" }, "Anytime!")
                                ),
                                React.createElement('p', { className: "text-[10px] text-emerald-400 font-bold mb-4 uppercase tracking-wider" }, "Help tidy after meals")
                            ),
                            React.createElement('div', { className: "flex gap-2" },
                                React.createElement('button', { onClick: () => clearTable('Max'), className: "flex-1 bg-purple-700 hover:bg-purple-600 py-2 rounded-xl text-[10px] font-black uppercase transition-colors" }, "+25c Max"),
                                React.createElement('button', { onClick: () => clearTable('Ari'), className: "flex-1 bg-orange-700 hover:bg-orange-600 py-2 rounded-xl text-[10px] font-black uppercase transition-colors" }, "+25c Ari")
                            )
                        )
                    )
                ),

                React.createElement('section', { className: `rounded-[3rem] p-10 border-4 transition-all duration-500 shadow-2xl mb-12 ${isWeekend ? 'bg-indigo-900/40 border-indigo-400' : 'bg-slate-900/30 border-slate-800'}` },
                    React.createElement('div', { className: "flex flex-col md:flex-row items-center justify-between gap-8 text-center md:text-left" },
                        React.createElement('div', { className: "flex flex-col md:flex-row items-center gap-6" },
                            React.createElement('div', { className: `w-20 h-20 rounded-3xl flex items-center justify-center text-4xl shadow-lg transition-all ${isWeekend ? 'bg-white scale-110 animate-wiggle' : 'bg-slate-800 grayscale'}` }, 
                                "ðŸ¦·"
                            ),
                            React.createElement('div', null,
                                React.createElement('h3', { className: `text-3xl font-black uppercase italic mb-1 ${isWeekend ? 'text-white' : 'text-slate-500'}` }, "Tooth Fairy Inspection"),
                                React.createElement('p', { className: "text-slate-400 max-w-sm" }, "Weekend only rewards! â‚¬1 for daily record, â‚¬3 for double record.")
                            )
                        ),
                        isWeekend ? (
                            React.createElement('button', { onClick: runToothInspection, disabled: inspecting, className: "w-full md:w-auto bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 px-12 rounded-3xl uppercase tracking-widest shadow-xl transition-all active:scale-95" },
                                inspecting ? "Inspecting..." : "Run Inspection"
                            )
                        ) : (
                            React.createElement('div', { className: "bg-black/50 px-8 py-5 rounded-3xl border border-white/10" },
                                React.createElement('p', { className: "text-xs uppercase font-black text-slate-500 mb-2" }, "Next Inspection In:"),
                                React.createElement('p', { className: "text-3xl font-mono text-yellow-500 font-black animate-pulse" }, getCountdown())
                            )
                        )
                    ),
                    inspectionResult && React.createElement('div', { className: "mt-10 grid grid-cols-2 gap-6 animate-float" },
                        ['max', 'ari'].map(b => React.createElement('div', { key: b, className: "bg-black/40 p-6 rounded-3xl border border-white/10" },
                            React.createElement('div', { className: "font-black uppercase text-xl text-indigo-300 mb-2" }, b),
                            React.createElement('div', { className: "text-sm text-slate-400" }, `7-Day Hits: ${inspectionResult[b].hits}`),
                            React.createElement('div', { className: "text-sm text-slate-400" }, `7-Day Doubles: ${inspectionResult[b].doubles}`),
                            React.createElement('div', { className: "text-3xl text-yellow-400 font-black mt-3" }, `+ â‚¬${inspectionResult[b].reward}`)
                        ))
                    )
                ),

                React.createElement('main', { className: "grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12" },
                    [{ boy: 'Max', chores: maxChores, color: 'purple' },
                     { boy: 'Ari', chores: ariChores, color: 'orange' }
                    ].map(p => React.createElement('div', { key: p.boy, className: `bg-slate-900/80 border-l-[16px] border-${p.color}-500 rounded-[3rem] p-10 shadow-xl backdrop-blur-sm` },
                        React.createElement('div', { className: "flex justify-between items-center mb-10" },
                            React.createElement('h3', { className: `text-4xl font-black italic text-${p.color}-400` }, p.boy),
                            React.createElement('div', { className: "bg-yellow-400/10 px-4 py-2 rounded-xl text-yellow-400 font-black text-xl border border-yellow-400/20" }, 
                                `+ â‚¬${p.chores.reduce((acc, c) => c.completed ? acc + c.reward : acc, 0).toFixed(2)}`
                            )
                        ),
                        React.createElement('div', { className: "space-y-4 mb-10" },
                            p.chores.map(c => React.createElement('button', { key: c.id, onClick: () => toggleChore(p.boy, c.id), className: `w-full flex items-center justify-between p-5 rounded-2xl border-2 transition-all active:scale-95 ${c.completed ? 'bg-green-500/10 border-green-500 text-green-400' : 'bg-black/40 border-slate-800 hover:border-slate-600'}` },
                                React.createElement('div', { className: "flex items-center gap-4" },
                                    c.completed ? React.createElement(CheckCircle2, { size: 24 }) : React.createElement(Circle, { size: 24 }),
                                    React.createElement('span', { className: "font-black text-lg" }, `${c.emoji} ${c.task}`)
                                ),
                                React.createElement('span', { className: "text-yellow-400 font-black text-xl" }, `â‚¬${c.reward.toFixed(2)}`)
                            ))
                        ),
                        React.createElement('button', { onClick: () => bankEarnings(p.boy), className: "w-full py-5 bg-white text-black rounded-3xl font-black uppercase text-sm tracking-widest hover:bg-yellow-400 transition-colors shadow-xl" }, "Bank Earnings ðŸ’°")
                    ))
                ),

                React.createElement('footer', { className: "mt-12 grid grid-cols-1 md:grid-cols-2 gap-6" },
                    React.createElement('div', { className: `bg-gradient-to-r ${powerUpClaimed ? 'from-green-600 to-emerald-600' : 'from-amber-500 to-orange-600'} rounded-[3rem] p-8 flex flex-col items-center border-b-8 border-black/30 shadow-2xl gap-6` },
                        React.createElement('div', { className: "flex flex-col items-center text-center" },
                            React.createElement('div', { className: "p-4 bg-white/20 rounded-[2rem] shadow-inner mb-4" }, React.createElement(Box, { size: 40, className: "animate-bounce" })),
                            React.createElement('h4', { className: "text-3xl font-black italic" }, "Lego Sorting"),
                            React.createElement('p', { className: "text-sm font-bold uppercase tracking-widest opacity-90 mt-1" }, "Shared: Both get 50c!")
                        ),
                        React.createElement('button', { onClick: claimLegoBonus, disabled: powerUpClaimed, className: `w-full py-4 px-8 rounded-[2rem] font-black uppercase tracking-widest text-sm transition-all ${powerUpClaimed ? 'bg-black/20 text-slate-300' : 'bg-yellow-400 text-black hover:scale-105 shadow-xl'}` },
                            powerUpClaimed ? "COMPLETE" : "CLAIM BONUS"
                        )
                    ),
                    React.createElement('div', { className: `bg-gradient-to-r ${chessBonusClaimed ? 'from-green-600 to-emerald-600' : 'from-blue-500 to-indigo-600'} rounded-[3rem] p-8 flex flex-col items-center border-b-8 border-black/30 shadow-2xl gap-6` },
                        React.createElement('div', { className: "flex flex-col items-center text-center" },
                            React.createElement('div', { className: "p-4 bg-white/20 rounded-[2rem] shadow-inner mb-4" }, React.createElement(Trophy, { size: 40, className: "animate-float" })),
                            React.createElement('h4', { className: "text-3xl font-black italic" }, "Chess Set Cleaned Away"),
                            React.createElement('p', { className: "text-sm font-bold uppercase tracking-widest opacity-90 mt-1" }, "Shared: Both get 50c!")
                        ),
                        React.createElement('button', { onClick: claimChessBonus, disabled: chessBonusClaimed, className: `w-full py-4 px-8 rounded-[2rem] font-black uppercase tracking-widest text-sm transition-all ${chessBonusClaimed ? 'bg-black/20 text-slate-300' : 'bg-yellow-400 text-black hover:scale-105 shadow-xl'}` },
                            chessBonusClaimed ? "COMPLETE" : "CLAIM BONUS"
                        )
                    )
                )
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>

