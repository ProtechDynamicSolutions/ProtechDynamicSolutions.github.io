<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kavanagh Crane Hire - Capacity Guide</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Three.js (Pre-loaded to prevent flashes, though the component also checks for it) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Import Map for React modules without a build step -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.292.0"
        }
    }
    </script>

    <!-- Babel for JSX transformation in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Custom Tailwind Configuration to match specific hex codes if needed -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'crane-yellow': '#eab308',
                        'kavanagh-blue': '#00CCFF',
                    },
                    animation: {
                        'slide-bg': 'slideBackground 60s linear infinite',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Custom scrollbar for a premium feel */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #18181b; 
        }
        ::-webkit-scrollbar-thumb {
            background: #3f3f46; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #eab308; 
        }
    </style>
</head>
<body class="bg-zinc-950 text-zinc-200 antialiased selection:bg-yellow-500 selection:text-zinc-900">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
          Calculator, 
          Ruler, 
          Weight, 
          ArrowRight, 
          Phone, 
          Mail, 
          AlertTriangle, 
          CheckCircle2, 
          Construction, 
          Menu,
          X,
          ExternalLink,
          Info,
          Box,
          List
        } from 'lucide-react';

        /**
         * MOCK DATA GENERATION
         */
        const CRANE_FLEET = [
          {
            id: 'c20',
            name: '20t City Crane',
            type: 'City Class',
            image: 'https://placehold.co/100x100/eab308/18181b?text=20t',
            chart: [
              { r: 4, c: 20 }, { r: 6, c: 15 }, { r: 8, c: 10 }, { r: 10, c: 8 }, 
              { r: 12, c: 6 }, { r: 14, c: 4.5 }, { r: 16, c: 3.5 }, { r: 18, c: 2.5 }, { r: 20, c: 1.5 }
            ]
          },
          {
            id: 'c35',
            name: '35t All Terrain',
            type: 'All Terrain',
            image: 'https://placehold.co/100x100/eab308/18181b?text=35t',
            chart: [
              { r: 6, c: 35 }, { r: 8, c: 26 }, { r: 10, c: 18 }, { r: 12, c: 14 }, 
              { r: 14, c: 10.5 }, { r: 16, c: 8.5 }, { r: 18, c: 6.8 }, { r: 20, c: 5.5 }, 
              { r: 24, c: 3.8 }, { r: 28, c: 2.5 }
            ]
          },
          {
            id: 'c50',
            name: '50t All Terrain',
            type: 'All Terrain',
            image: 'https://placehold.co/100x100/eab308/18181b?text=50t',
            chart: [
              { r: 6, c: 50 }, { r: 10, c: 32 }, { r: 14, c: 18 }, { r: 18, c: 12 }, 
              { r: 22, c: 8.5 }, { r: 26, c: 6.2 }, { r: 30, c: 4.5 }, { r: 34, c: 3.2 }, { r: 38, c: 2.5 }
            ]
          },
          {
            id: 'c80',
            name: '80t Heavy Lifter',
            type: 'Heavy Duty',
            image: 'https://placehold.co/100x100/eab308/18181b?text=80t',
            chart: [
              { r: 8, c: 80 }, { r: 12, c: 55 }, { r: 16, c: 38 }, { r: 20, c: 28 }, 
              { r: 24, c: 21 }, { r: 28, c: 16 }, { r: 32, c: 12.5 }, { r: 36, c: 9.5 }, 
              { r: 40, c: 7.5 }, { r: 44, c: 6.0 }, { r: 48, c: 4.8 }
            ]
          },
          {
            id: 'c130',
            name: '130t Grove',
            type: 'Heavy Duty',
            image: 'https://placehold.co/100x100/eab308/18181b?text=130t',
            chart: [
              { r: 10, c: 130 }, { r: 16, c: 80 }, { r: 22, c: 55 }, { r: 28, c: 40 }, 
              { r: 34, c: 29 }, { r: 40, c: 21 }, { r: 46, c: 15 }, { r: 52, c: 11 }, { r: 54, c: 9.5 }
            ]
          }
        ];

        // --- Custom Background Component ---
        const AnimatedBackground = () => (
          <div className="fixed inset-0 z-0 overflow-hidden pointer-events-none bg-zinc-950">
            <div className="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-yellow-500/10 rounded-full blur-[120px] animate-pulse"></div>
            <div className="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-[#00CCFF]/10 rounded-full blur-[120px] animate-pulse" style={{ animationDelay: '2s' }}></div>
            <div className="absolute inset-0 opacity-[0.03]"
                 style={{
                   backgroundImage: `linear-gradient(30deg, #eab308 12%, transparent 12.5%, transparent 87%, #eab308 87.5%, #eab308),
                                     linear-gradient(150deg, #eab308 12%, transparent 12.5%, transparent 87%, #eab308 87.5%, #eab308),
                                     linear-gradient(30deg, #eab308 12%, transparent 12.5%, transparent 87%, #eab308 87.5%, #eab308),
                                     linear-gradient(150deg, #eab308 12%, transparent 12.5%, transparent 87%, #eab308 87.5%, #eab308),
                                     linear-gradient(60deg, #77777777 25%, transparent 25.5%, transparent 75%, #77777777 75%, #77777777),
                                     linear-gradient(60deg, #77777777 25%, transparent 25.5%, transparent 75%, #77777777 75%, #77777777)`,
                   backgroundSize: '80px 140px',
                   backgroundPosition: '0 0, 0 0, 40px 70px, 40px 70px, 0 0, 40px 70px',
                   animation: 'slideBackground 60s linear infinite'
                 }}
            ></div>
            <style>{`
              @keyframes slideBackground {
                0% { background-position: 0 0, 0 0, 40px 70px, 40px 70px, 0 0, 40px 70px; }
                100% { background-position: 80px 140px, 80px 140px, 120px 210px, 120px 210px, 80px 140px, 120px 210px; }
              }
            `}</style>
          </div>
        );

        // --- 3D Visualizer Component ---
        const CraneVisualizer = ({ radius, weight }) => {
          const mountRef = useRef(null);
          const sceneRef = useRef(null);
          const [isThreeLoaded, setIsThreeLoaded] = useState(false);

          // Load Three.js from CDN
          useEffect(() => {
            if (window.THREE) {
              setIsThreeLoaded(true);
              return;
            }
            const script = document.createElement('script');
            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js';
            script.async = true;
            script.onload = () => setIsThreeLoaded(true);
            document.body.appendChild(script);
            return () => {
              if (document.body.contains(script)) {
                document.body.removeChild(script);
              }
            };
          }, []);

          // Initialize and Update Scene
          useEffect(() => {
            if (!isThreeLoaded || !mountRef.current) return;

            const THREE = window.THREE;
            const width = mountRef.current.clientWidth;
            const height = mountRef.current.clientHeight;

            // SCENE SETUP
            let scene, camera, renderer, craneGroup, boomGroup, boomHousing, boomInnerGroup, boomInnerMesh, loadMesh, cableLine, hookGroup, pistonGroup, winchLine;
            
            if (!sceneRef.current) {
              scene = new THREE.Scene();
              scene.background = null; 

              // Camera
              camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);
              camera.position.set(22, 15, 22);
              camera.lookAt(8, 8, 0);

              // Renderer
              renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
              renderer.setSize(width, height);
              renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
              mountRef.current.appendChild(renderer.domElement);

              // Handle Resize
              const handleResize = () => {
                if (!mountRef.current) return;
                const newW = mountRef.current.clientWidth;
                const newH = mountRef.current.clientHeight;
                camera.aspect = newW / newH;
                camera.updateProjectionMatrix();
                renderer.setSize(newW, newH);
              };
              window.addEventListener('resize', handleResize);

              // Lighting
              const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
              scene.add(ambientLight);
              const dirLight = new THREE.DirectionalLight(0xffffff, 1.0);
              dirLight.position.set(20, 40, 20);
              scene.add(dirLight);

              // Ground Grid
              const gridHelper = new THREE.GridHelper(100, 50, 0x00CCFF, 0x475569); 
              scene.add(gridHelper);

              // --- MATERIALS ---
              const yellowMat = new THREE.MeshPhongMaterial({ color: 0xeab308, shininess: 60 }); 
              const blackMat = new THREE.MeshLambertMaterial({ color: 0x111111 });
              const zincMat = new THREE.MeshLambertMaterial({ color: 0x27272a }); 
              const redMat = new THREE.MeshPhongMaterial({ color: 0xdc2626 });
              const greyMat = new THREE.MeshPhongMaterial({ color: 0x9ca3af }); 
              const darkGreyMat = new THREE.MeshPhongMaterial({ color: 0x4b5563 });

              // --- CRANE CONSTRUCTION ---
              craneGroup = new THREE.Group();

              // 1. Base (Chassis)
              const chassisGeo = new THREE.BoxGeometry(3, 1.2, 9);
              const chassis = new THREE.Mesh(chassisGeo, zincMat);
              chassis.position.y = 1.2;
              craneGroup.add(chassis);

              // Outriggers
              const outriggerGeo = new THREE.BoxGeometry(8, 0.3, 0.6);
              const outrigger1 = new THREE.Mesh(outriggerGeo, zincMat);
              outrigger1.position.set(0, 0.8, 3);
              craneGroup.add(outrigger1);
              const outrigger2 = new THREE.Mesh(outriggerGeo, zincMat);
              outrigger2.position.set(0, 0.8, -3);
              craneGroup.add(outrigger2);
              
              const padGeo = new THREE.CylinderGeometry(0.6, 0.6, 0.2, 8);
              [[3.5, 0.1, 3], [-3.5, 0.1, 3], [3.5, 0.1, -3], [-3.5, 0.1, -3]].forEach(pos => {
                const p = new THREE.Mesh(padGeo, blackMat);
                p.position.set(...pos);
                craneGroup.add(p);
              });

              // Wheels
              const wheelGeo = new THREE.CylinderGeometry(0.7, 0.7, 0.5, 16);
              wheelGeo.rotateZ(Math.PI / 2);
              [[-1.5, 0.7, 3], [1.5, 0.7, 3], [-1.5, 0.7, 1], [1.5, 0.7, 1], [-1.5, 0.7, -1], [1.5, 0.7, -1], [-1.5, 0.7, -3], [1.5, 0.7, -3]].forEach(pos => {
                const w = new THREE.Mesh(wheelGeo, blackMat);
                w.position.set(...pos);
                craneGroup.add(w);
              });

              // 2. Superstructure (Turret)
              const turretGroup = new THREE.Group();
              turretGroup.position.set(0, 1.8, 0); 
              craneGroup.add(turretGroup);

              // Turret Base
              const turretGeo = new THREE.BoxGeometry(2.8, 1.5, 4);
              const turretBase = new THREE.Mesh(turretGeo, yellowMat);
              turretBase.position.z = -0.5;
              turretGroup.add(turretBase);

              // Counterweights
              const cwGeo = new THREE.BoxGeometry(2.8, 1.2, 1.5);
              const cw = new THREE.Mesh(cwGeo, yellowMat); 
              cw.position.set(0, 0.2, -2.2); 
              turretGroup.add(cw);

              // Cab
              const cabGeo = new THREE.BoxGeometry(1.2, 1.6, 2);
              const cab = new THREE.Mesh(cabGeo, yellowMat);
              cab.position.set(1.5, 0.5, 1);
              turretGroup.add(cab);

              // 3. BOOM ASSEMBLY
              const pivotY = 1.0;
              const pivotZ = 0.5;
              
              boomGroup = new THREE.Group();
              boomGroup.position.set(0, pivotY, pivotZ); 
              turretGroup.add(boomGroup);

              // Boom Housing (Main Section)
              const boomOuterGeo = new THREE.BoxGeometry(1.2, 1.4, 7);
              boomOuterGeo.translate(0, 0, 3.5); 
              boomHousing = new THREE.Mesh(boomOuterGeo, yellowMat);
              boomGroup.add(boomHousing);

              // Inner Boom (Extension) Group
              boomInnerGroup = new THREE.Group();
              boomGroup.add(boomInnerGroup);

              // The Extension Pole
              const boomInnerGeo = new THREE.BoxGeometry(0.9, 1.1, 40); // 40m visual length
              boomInnerGeo.translate(0, 0, 20); // Extends from 0 to 40
              const innerMat = new THREE.MeshPhongMaterial({ color: 0x333333 }); // Dark grey
              boomInnerMesh = new THREE.Mesh(boomInnerGeo, innerMat);
              boomInnerGroup.add(boomInnerMesh);

              // Boom Tip Sheave (Pulley)
              const sheaveGeo = new THREE.CylinderGeometry(0.4, 0.4, 1.2, 16);
              sheaveGeo.rotateZ(Math.PI / 2); 
              const sheave = new THREE.Mesh(sheaveGeo, darkGreyMat); 
              sheave.position.set(0, 0, 40); 
              boomInnerGroup.add(sheave);

              // Hydraulic Ram (Visual)
              const ramGeo = new THREE.CylinderGeometry(0.15, 0.15, 3, 8);
              ramGeo.translate(0, 1.5, 0);
              ramGeo.rotateX(-Math.PI/2);
              const ramMat = new THREE.MeshPhongMaterial({color: 0x888888, shininess: 100});
              pistonGroup = new THREE.Group();
              const pistonMesh = new THREE.Mesh(ramGeo, ramMat);
              pistonGroup.add(pistonMesh);
              pistonGroup.position.set(0, -0.5, 1.5); 
              turretGroup.add(pistonGroup);

              // 5. Load
              const loadGeo = new THREE.BoxGeometry(1, 1, 1);
              loadMesh = new THREE.Mesh(loadGeo, redMat);
              scene.add(loadMesh);

              // 6. Hook Block (Red & Grey)
              hookGroup = new THREE.Group();
              scene.add(hookGroup);
              
              const blockGeo = new THREE.BoxGeometry(0.5, 0.6, 0.3);
              const blockMesh = new THREE.Mesh(blockGeo, redMat);
              hookGroup.add(blockMesh);
              
              const cheekGeo = new THREE.BoxGeometry(0.55, 0.5, 0.1);
              const cheek1 = new THREE.Mesh(cheekGeo, greyMat);
              cheek1.position.z = 0.16;
              hookGroup.add(cheek1);
              const cheek2 = new THREE.Mesh(cheekGeo, greyMat);
              cheek2.position.z = -0.16;
              hookGroup.add(cheek2);

              const hookCurveGeo = new THREE.TorusGeometry(0.15, 0.05, 8, 16, Math.PI * 1.5);
              hookCurveGeo.rotateZ(Math.PI); 
              hookCurveGeo.rotateY(Math.PI / 2);
              const hookMeshGeo = new THREE.Mesh(hookCurveGeo, greyMat);
              hookMeshGeo.position.y = -0.45;
              hookGroup.add(hookMeshGeo);

              // 7. Cable - Steel Grey
              const lineGeo = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0,0,0), new THREE.Vector3(0,0,0)]);
              const lineMat = new THREE.LineBasicMaterial({ color: 0x9ca3af, linewidth: 2 }); 
              cableLine = new THREE.Line(lineGeo, lineMat);
              scene.add(cableLine);

              // 8. Winch Line
              const winchGeo = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0,0,0), new THREE.Vector3(0,0,0)]);
              winchLine = new THREE.Line(winchGeo, lineMat);
              boomGroup.add(winchLine);

              scene.add(craneGroup);
              
              sceneRef.current = { 
                scene, camera, renderer, 
                boomGroup, boomInnerGroup, pistonGroup,
                loadMesh, hookGroup, cableLine, winchLine
              };

              const animate = () => {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
              };
              animate();

            } else {
              ({ scene, camera, renderer, boomGroup, boomInnerGroup, pistonGroup, loadMesh, hookGroup, cableLine, winchLine } = sceneRef.current);
            }

            // --- UPDATE LOGIC ---
            const r = parseFloat(radius) || 5; 
            const w = parseFloat(weight) || 1; 

            // Scale Load
            const scale = 0.8 + (w / 40) * 1.5;
            loadMesh.scale.set(scale, scale, scale);

            // Position Load
            const groundLevel = scale / 2;
            loadMesh.position.set(0, groundLevel, r);

            // Calculate Boom Geometry
            const pivotY = 4.0;
            const pivotZ = 0.5;

            let tipH = Math.max(12, 25 - (r * 0.3));
            let dx = r - pivotZ;
            let dy = tipH - pivotY;
            let requiredLen = Math.sqrt(dx*dx + dy*dy);
            
            if (requiredLen < 8) {
               if (8*8 > dx*dx) {
                 dy = Math.sqrt(8*8 - dx*dx);
                 tipH = pivotY + dy;
               }
            }

            const angle = Math.atan2(dy, dx); 
            boomGroup.rotation.x = -angle; 

            // Extension Logic
            boomInnerGroup.position.z = requiredLen - 40; 

            // Hydraulic Piston
            pistonGroup.rotation.x = -angle * 0.7; 

            // Update Hook Group
            const hookY = groundLevel + (scale / 2) + 0.5;
            hookGroup.position.set(0, hookY + 0.5, r);

            // Cable
            const cableStart = new THREE.Vector3(0, tipH, r); 
            const cableEnd = new THREE.Vector3(0, hookY + 0.8, r);
            cableLine.geometry.setFromPoints([cableStart, cableEnd]);

            // Winch Line
            const winchStart = new THREE.Vector3(0, 0.7, 0); 
            const winchEnd = new THREE.Vector3(0, 0.6, requiredLen);
            winchLine.geometry.setFromPoints([winchStart, winchEnd]);

            // Camera
            const camZ = 25 + (r * 0.5); 
            const camY = 10 + (tipH * 0.3); 
            camera.position.set(25, camY, camZ);
            camera.lookAt(0, tipH * 0.4, r * 0.5);

          }, [isThreeLoaded, radius, weight]);

          return (
            // White/Glassmorphism Container
            <div className="w-full h-80 md:h-96 bg-zinc-950/40 backdrop-blur-xl rounded-2xl overflow-hidden border border-white/10 relative shadow-2xl group">
              <div ref={mountRef} className="w-full h-full" />
              <div className="absolute bottom-3 left-3 bg-zinc-900/80 backdrop-blur-md px-3 py-1 rounded text-[10px] text-zinc-300 pointer-events-none border border-white/10">
                Visualisation • Radius: {radius}m • Load: {weight}t
              </div>
              <div className="absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity bg-zinc-900/80 backdrop-blur-md px-2 py-1 rounded text-[10px] text-yellow-500 border border-yellow-500/20">
                3D Simulation
              </div>
            </div>
          );
        };

        // ... Navigation and SliderInput Components ...
        const Navigation = () => {
          const [isOpen, setIsOpen] = useState(false);

          return (
            <nav className="sticky top-0 z-50 border-b border-white/10 bg-zinc-900/90 backdrop-blur-md">
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex items-center justify-between h-20">
                  <div className="flex items-center gap-3">
                    <a 
                      href="https://kavanaghcranehire.ie/our-cranes/" 
                      target="_blank" 
                      rel="noreferrer"
                      className="h-12 md:h-16 w-auto flex items-center justify-center transition-transform hover:scale-105 duration-300"
                    >
                      <img 
                        src="https://www.eureka.ie/wp-content/uploads/sites/2/2025/11/Kavanagh-Crane-Hire-Logo-2.png" 
                        alt="Kavanagh Crane Hire" 
                        className="h-full w-auto object-contain"
                        onError={(e) => {
                          e.target.onerror = null;
                          e.target.style.display = 'none';
                          e.target.nextSibling.style.display = 'block';
                        }}
                      />
                      <Construction className="text-zinc-900 h-6 w-6 hidden" />
                    </a>
                  </div>
                  
                  <div className="hidden md:block">
                    <div className="ml-10 flex items-center space-x-8">
                      <a href="#" className="text-zinc-200 px-3 py-2 rounded-md text-sm font-medium hover:text-yellow-400 transition-colors">Calculator</a>
                      <a 
                        href="https://kavanaghcranehire.ie/our-cranes/" 
                        target="_blank" 
                        rel="noreferrer" 
                        className="text-zinc-200 px-3 py-2 rounded-md text-sm font-medium hover:text-yellow-400 transition-colors flex items-center gap-1"
                      >
                        Our Fleet <ExternalLink size={14} />
                      </a>
                      {/* UPDATED to #00CCFF */}
                      <a href="#contact" className="bg-[#00CCFF] text-zinc-900 px-5 py-2.5 rounded-lg text-sm font-bold hover:bg-[#00b8e6] transition-all shadow-lg shadow-[#00CCFF]/20 hover:shadow-[#00CCFF]/40 transform hover:-translate-y-0.5">Contact Us</a>
                    </div>
                  </div>

                  <div className="md:hidden">
                    <button onClick={() => setIsOpen(!isOpen)} className="text-zinc-400 hover:text-white p-2">
                      {isOpen ? <X /> : <Menu />}
                    </button>
                  </div>
                </div>
              </div>

              {isOpen && (
                <div className="md:hidden bg-zinc-900/95 backdrop-blur-xl p-4 space-y-2 border-b border-zinc-700 absolute w-full shadow-2xl">
                    <a href="#" className="block text-white px-3 py-3 rounded-md text-base font-medium border-b border-white/5">Calculator</a>
                    <a href="https://kavanaghcranehire.ie/our-cranes/" target="_blank" rel="noreferrer" className="text-white px-3 py-3 rounded-md text-base font-medium flex items-center gap-2 border-b border-white/5">Our Fleet <ExternalLink size={14}/></a>
                    {/* UPDATED to #00CCFF */}
                    <a href="#contact" className="block text-[#00CCFF] px-3 py-3 rounded-md text-base font-medium">Contact Us</a>
                </div>
              )}
            </nav>
          );
        };

        const SliderInput = ({ label, icon: Icon, value, onChange, min, max, step, unit, placeholder }) => {
          const percentage = Math.min(100, Math.max(0, ((value - min) / (max - min)) * 100));

          return (
            <div className="space-y-2">
              <div className="flex justify-between items-center">
                <label className="flex items-center gap-2 text-xs font-medium text-zinc-300 uppercase tracking-wide">
                  <Icon size={14} className="text-yellow-500" /> {label}
                </label>
                {/* Removed redundant "Max" badge for cleaner/smaller look */}
              </div>
              
              <div className="flex flex-col sm:flex-row items-center gap-3">
                <div className="relative w-full h-8 flex items-center group">
                  <div className="absolute w-full h-2 bg-zinc-800/50 rounded-full border border-white/5 overflow-hidden">
                     <div 
                       className="h-full bg-gradient-to-r from-yellow-600 to-yellow-400 transition-all duration-100 ease-out"
                       style={{ width: `${percentage}%` }}
                     ></div>
                  </div>
                  
                  <input
                    type="range"
                    min={min}
                    max={max}
                    step={step}
                    value={value || 0}
                    onChange={onChange}
                    className="absolute w-full h-full opacity-0 cursor-pointer z-10"
                  />
                  
                  <div 
                    className="absolute h-5 w-5 bg-white rounded-full shadow-lg shadow-black/50 border-2 border-yellow-500 pointer-events-none transition-all duration-100 ease-out group-hover:scale-110"
                    style={{ left: `calc(${percentage}% - 10px)` }}
                  ></div>
                </div>

                <div className="relative group w-full sm:w-24 shrink-0">
                  <input 
                    type="number" 
                    step={step}
                    min={min}
                    max={max}
                    value={value}
                    onChange={onChange}
                    placeholder={placeholder}
                    className="w-full bg-zinc-900/50 backdrop-blur-sm border border-zinc-700/50 text-white rounded-lg py-1.5 pl-2 pr-6 focus:ring-1 focus:ring-yellow-500/50 focus:border-yellow-500/50 outline-none transition-all placeholder:text-zinc-600 font-mono text-base text-right shadow-inner"
                    required
                  />
                  <div className="absolute right-2 top-2 text-zinc-500 font-mono text-[10px] font-bold">{unit}</div>
                </div>
              </div>
            </div>
          );
        };

        const ResultCard = ({ crane, userWeight, userRadius, isRecommended }) => {
          return (
            <div className={`relative overflow-hidden rounded-2xl border transition-all duration-500 group h-full flex flex-col ${
              isRecommended 
                ? 'bg-zinc-800/40 backdrop-blur-md border-yellow-500/50 shadow-2xl shadow-yellow-900/20 hover:-translate-y-1 hover:shadow-yellow-500/10' 
                : 'bg-zinc-900/40 backdrop-blur-md border-white/5 hover:bg-zinc-800/60 hover:border-zinc-600 hover:-translate-y-1'
            }`}>
              <div className={`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none bg-gradient-to-br ${isRecommended ? 'from-yellow-500/10 via-transparent to-transparent' : 'from-zinc-700/20 via-transparent to-transparent'}`} />

              {isRecommended && (
                <div className="absolute top-0 right-0 bg-yellow-500 text-zinc-950 text-[10px] font-black px-3 py-1 rounded-bl-lg flex items-center gap-1 shadow-lg z-10">
                  <CheckCircle2 size={10} strokeWidth={3} /> BEST MATCH
                </div>
              )}
              
              <div className="p-5 flex-grow flex flex-col relative z-10">
                <div className="flex justify-between items-start mb-4">
                  <div>
                    <span className="inline-block px-1.5 py-0.5 rounded bg-white/5 text-[9px] font-bold text-zinc-400 uppercase tracking-widest border border-white/5 mb-1">{crane.type}</span>
                    <h3 className="text-lg font-bold text-white tracking-tight">{crane.name}</h3>
                  </div>
                  <div className={`text-right shrink-0 ${isRecommended ? 'pt-6' : ''}`}> 
                     <div className="text-xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white to-zinc-400">{crane.capacityAtRadius}t</div>
                     <div className="text-[9px] text-zinc-500 font-medium uppercase tracking-wide">Cap. @ {userRadius}m</div>
                  </div>
                </div>

                <div className="w-full bg-zinc-950/50 rounded-full h-2 mb-2 border border-white/5 p-[1px] mt-auto">
                  <div 
                    className={`h-full rounded-full transition-all duration-1000 ease-out ${isRecommended ? 'bg-gradient-to-r from-yellow-600 to-yellow-400 shadow-[0_0_10px_rgba(234,179,8,0.3)]' : 'bg-zinc-600'}`} 
                    style={{ width: `${(userWeight / crane.capacityAtRadius) * 100}%` }}
                  ></div>
                </div>
                <div className="flex justify-between text-[10px] font-medium text-zinc-400 mb-4">
                  <span>Load: {userWeight}t</span>
                  <span className={isRecommended ? 'text-yellow-500' : ''}>{Math.round((userWeight / crane.capacityAtRadius) * 100)}% util</span>
                </div>

                <button className={`w-full py-2.5 rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all duration-300 ${
                  isRecommended 
                    ? 'bg-white text-zinc-900 hover:bg-yellow-400 hover:scale-[1.02] shadow-lg' 
                    : 'bg-white/5 text-white hover:bg-white/10 border border-white/10 hover:border-white/20'
                }`}>
                  Request Crane <ArrowRight size={14} />
                </button>
              </div>
            </div>
          );
        };

        function App() {
          const [weight, setWeight] = useState('');
          const [radius, setRadius] = useState('');
          const [results, setResults] = useState([]);
          const [isCalculated, setIsCalculated] = useState(false);

          // Auto-calculate when sliders change
          useEffect(() => {
            if (weight && radius) {
              performCalculation(weight, radius);
            }
          }, [weight, radius]);

          const performCalculation = (wVal, rVal) => {
            const w = parseFloat(wVal);
            const r = parseFloat(rVal);

            if (isNaN(w) || isNaN(r) || w === 0 || r === 0) {
              setResults([]);
              setIsCalculated(false);
              return;
            }

            const suitableCranes = CRANE_FLEET.map(crane => {
              const sortedChart = crane.chart.sort((a, b) => a.r - b.r);
              const point = sortedChart.find(p => p.r >= r);

              if (!point) return null;

              if (point.c >= w) {
                return {
                  ...crane,
                  capacityAtRadius: point.c,
                  margin: point.c - w
                };
              }
              return null;
            }).filter(Boolean);

            suitableCranes.sort((a, b) => a.margin - b.margin);
            setResults(suitableCranes);
            setIsCalculated(true);
          };

          const handleCalculate = (e) => {
            e.preventDefault();
            performCalculation(weight, radius);
          };

          const resetForm = () => {
            setWeight('');
            setRadius('');
            setIsCalculated(false);
            setResults([]);
          };

          return (
            <div className="min-h-screen text-zinc-200 font-sans selection:bg-yellow-500 selection:text-zinc-900 relative">
              <AnimatedBackground />

              <div className="relative z-10 flex flex-col min-h-screen">
                <Navigation />

                <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12 flex-grow w-full">
                  
                  <div className="text-center mb-8 md:mb-10 animate-in fade-in slide-in-from-bottom-8 duration-700">
                    <h2 className="text-3xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white via-zinc-200 to-zinc-500 mb-2 tracking-tight drop-shadow-sm">
                      Capacity Guide
                    </h2>
                    <p className="text-sm md:text-base text-zinc-400 max-w-2xl mx-auto leading-relaxed">
                      Precision lifting solutions. Identify the optimal Kavanagh crane for your project.
                    </p>
                  </div>

                  <div className="flex flex-col gap-6">
                    
                    {/* TOP ROW: Inputs + Results Side-by-Side on PC */}
                    <div className="grid grid-cols-1 md:grid-cols-12 gap-6 items-start">
                      
                      {/* Left Column: Calculator - Compact */}
                      <div className="md:col-span-5 xl:col-span-3 animate-in slide-in-from-left-4 duration-700 delay-150">
                        <div className="bg-zinc-900/40 backdrop-blur-xl rounded-2xl p-5 border border-white/10 shadow-2xl sticky top-24">
                          <div className="flex items-center gap-2 mb-6 text-yellow-500">
                            <div className="p-1.5 bg-yellow-500/10 rounded-md">
                              <Calculator className="h-4 w-4" />
                            </div>
                            <span className="font-bold tracking-wider uppercase text-xs text-zinc-200">Lift Calculator</span>
                          </div>

                          <form onSubmit={handleCalculate} className="space-y-6">
                            <SliderInput 
                              label="Load Weight"
                              icon={Weight}
                              value={weight}
                              onChange={(e) => setWeight(e.target.value)}
                              min={0}
                              max={40} 
                              step={0.5}
                              unit="t"
                              placeholder="0.0"
                            />

                            <SliderInput 
                              label="Operating Radius"
                              icon={Ruler}
                              value={radius}
                              onChange={(e) => setRadius(e.target.value)}
                              min={0}
                              max={54}
                              step={1}
                              unit="m"
                              placeholder="0"
                            />
                            
                            <div className="px-3 py-2 bg-white/5 rounded-lg border border-white/5 mt-2 flex gap-2 items-start">
                              <Info size={14} className="text-[#00CCFF] shrink-0 mt-0.5" />
                              <p className="text-[10px] text-zinc-400 leading-tight">
                                Distance from centre of crane slew to centre of lift.
                              </p>
                            </div>

                            <div className="pt-2">
                              <button 
                                type="button"
                                onClick={resetForm}
                                className="w-full bg-white/5 hover:bg-white/10 text-zinc-400 hover:text-white text-xs font-medium py-3 rounded-lg transition-colors border border-white/5 backdrop-blur-sm"
                              >
                                Reset Calculation
                              </button>
                            </div>

                            {/* Updated Safety Notice */}
                            <div className="mt-6 pt-4 border-t border-white/5">
                              <div className="flex gap-3 mb-2">
                                 <AlertTriangle className="text-yellow-600/70 shrink-0" size={16} />
                                 <span className="text-xs font-bold text-zinc-400">SAFETY NOTICE</span>
                              </div>
                              <ul className="list-decimal list-outside ml-8 text-[10px] text-zinc-500 space-y-1 leading-relaxed">
                                <li>This is a load radius chart, no account has been taken for the height of the lift or the wind speed</li>
                                <li>This chart is based on using a minimum boom length of 20.0m</li>
                                <li>Crane capacities will vary from manufacturer to manufacturer</li>
                                <li>Lifting capacities will vary with crane type (truck mounted or all Terrain)</li>
                              </ul>
                              <p className="text-[10px] text-zinc-600 mt-2 italic pl-8">
                                 Always consult the official load chart in the cab.
                              </p>
                            </div>
                          </form>
                        </div>
                      </div>

                      {/* Right Column: Results - Grid Layout */}
                      <div className="md:col-span-7 xl:col-span-9 animate-in slide-in-from-right-4 duration-700 delay-300">
                        
                        {!isCalculated ? (
                          // Empty State
                          <div className="h-full min-h-[300px] flex flex-col items-center justify-center text-center p-8 border border-dashed border-white/10 rounded-2xl bg-white/[0.02] backdrop-blur-sm">
                            <div className="w-16 h-16 bg-gradient-to-br from-zinc-800 to-zinc-900 rounded-full flex items-center justify-center mb-4 shadow-xl shadow-black/20 border border-white/5">
                              <Construction className="text-zinc-600 h-8 w-8 opacity-50" />
                            </div>
                            <h3 className="text-lg font-bold text-zinc-300">Ready to Lift</h3>
                            <p className="text-zinc-500 max-w-sm mt-2 text-sm leading-relaxed">Adjust the sliders to input your load weight (max 40t) and radius.</p>
                          </div>
                        ) : (
                          <div className="space-y-6">
                            {/* Header */}
                            <div className="flex items-center justify-between">
                              <h3 className="text-lg md:text-xl font-bold text-white flex items-center gap-2">
                                 Recommended Cranes
                                 <span className="px-2 py-0.5 bg-[#00CCFF]/10 text-[#00CCFF] text-[10px] font-bold rounded-full border border-[#00CCFF]/20">
                                  {results.length} Found
                                </span>
                              </h3>
                            </div>

                            {results.length > 0 ? (
                              <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                                {/* Primary Recommendation */}
                                <div className="animate-in zoom-in-95 duration-500 h-full">
                                  <ResultCard 
                                    crane={results[0]} 
                                    userWeight={parseFloat(weight)} 
                                    userRadius={parseFloat(radius)} 
                                    isRecommended={true} 
                                  />
                                </div>
                                
                                {/* Alternatives */}
                                {results.slice(1).map((crane, idx) => (
                                  <div key={crane.id} className="animate-in slide-in-from-bottom-4 duration-500 h-full" style={{ animationDelay: `${idx * 100}ms` }}>
                                    <ResultCard 
                                      crane={crane} 
                                      userWeight={parseFloat(weight)} 
                                      userRadius={parseFloat(radius)} 
                                      isRecommended={false} 
                                    />
                                  </div>
                                ))}
                              </div>
                            ) : (
                              // No Results State
                              <div className="flex flex-col items-center justify-center text-center p-8 bg-red-500/5 backdrop-blur-md border border-red-500/20 rounded-2xl">
                                <AlertTriangle className="text-red-500 h-8 w-8 mb-4" />
                                <h3 className="text-xl font-bold text-white mb-2">No Standard Matches</h3>
                                <p className="text-zinc-400 max-w-md mb-6 text-sm">
                                  The load ({weight}t at {radius}m) exceeds the standard chart capacities in this guide.
                                </p>
                                
                                <div className="bg-zinc-900/50 p-6 rounded-xl border border-white/10 w-full max-w-sm">
                                  <h4 className="text-white font-bold mb-2">Contact for Heavy Lift Plan</h4>
                                   {/* UPDATED: Mobile responsive split for call button */}
                                   <a href="tel:+353834700338" className="flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 bg-[#00CCFF] text-zinc-900 w-full py-4 sm:py-3 px-4 rounded-lg font-bold hover:bg-[#00b8e6] transition-all shadow-lg shadow-[#00CCFF]/20 hover:shadow-[#00CCFF]/40 mt-3 text-sm">
                                     <span className="flex items-center gap-2">
                                       <Phone size={16} className="shrink-0" /> Call Seán:
                                     </span>
                                     <span className="whitespace-nowrap">+353 83 470 0338</span>
                                  </a>
                                </div>
                              </div>
                            )}
                          </div>
                        )}
                      </div>
                    </div>

                    {/* BOTTOM ROW: 3D Visualization - Full Width Below Everything */}
                    {isCalculated && results.length > 0 && (
                      <div className="w-full mt-4 animate-in fade-in slide-in-from-bottom-8 duration-1000">
                        <div className="flex items-center gap-2 mb-4">
                          <Box className="text-yellow-500 h-5 w-5" />
                          <h3 className="text-lg font-bold text-white">Lift Simulation</h3>
                          <div className="h-px bg-white/10 flex-grow ml-4"></div>
                        </div>
                        <CraneVisualizer radius={radius} weight={weight} />
                        <p className="text-center text-[10px] text-zinc-600 uppercase tracking-widest mt-2">
                          Schematic Visualisation Only • Not to Scale
                        </p>
                      </div>
                    )}

                  </div>

                </main>

                <footer id="contact" className="bg-zinc-950/80 backdrop-blur-lg border-t border-white/5 mt-auto">
                  <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-12 text-center md:text-left">
                      <div>
                        <div className="flex items-center justify-center md:justify-start gap-2 mb-6">
                          <a 
                            href="https://kavanaghcranehire.ie/our-cranes/" 
                            target="_blank" 
                            rel="noreferrer"
                            className="h-12 w-auto inline-block hover:scale-105 transition-transform"
                          >
                             <img 
                                src="https://www.eureka.ie/wp-content/uploads/sites/2/2025/11/Kavanagh-Crane-Hire-Logo-2.png" 
                                alt="Kavanagh Crane Hire" 
                                className="h-full w-auto object-contain"
                                onError={(e) => {
                                  e.target.onerror = null;
                                  e.target.style.display = 'none';
                                  e.target.nextSibling.style.display = 'block';
                                }}
                              />
                          </a>
                        </div>
                        <p className="text-zinc-500 text-sm leading-relaxed max-w-xs mx-auto md:mx-0">
                          Ireland's leading mobile crane hire specialists. Providing lifting solutions across the country with safety and precision.
                        </p>
                      </div>
                      
                      <div className="flex flex-col items-center md:items-start">
                        <h4 className="text-white font-bold mb-6 tracking-wide uppercase text-sm">Contact</h4>
                        {/* UPDATED hover color to #00CCFF */}
                        <a href="tel:0214543881" className="flex items-center gap-3 text-zinc-400 hover:text-[#00CCFF] transition-colors mb-4 group">
                          <div className="p-2 bg-zinc-800 rounded-lg group-hover:bg-[#00CCFF] group-hover:text-zinc-900 transition-colors">
                            <Phone size={16} />
                          </div>
                          021 454 3881
                        </a>
                        <a href="mailto:info@irishcranehire.com" className="flex items-center gap-3 text-zinc-400 hover:text-[#00CCFF] transition-colors group">
                          <div className="p-2 bg-zinc-800 rounded-lg group-hover:bg-[#00CCFF] group-hover:text-zinc-900 transition-colors">
                            <Mail size={16} /> 
                          </div>
                          info@irishcranehire.com
                        </a>
                      </div>

                      <div className="flex flex-col items-center md:items-start">
                        <h4 className="text-white font-bold mb-6 tracking-wide uppercase text-sm">Online</h4>
                        <a href="http://www.kavanaghcranehire.ie" target="_blank" rel="noreferrer" className="text-zinc-400 hover:text-[#00CCFF] transition-colors mb-4 flex items-center gap-2">
                          www.kavanaghcranehire.ie <ExternalLink size={12} opacity={0.5}/>
                        </a>
                        <div className="flex gap-4 mt-2">
                          <div className="w-10 h-10 bg-zinc-900 border border-white/5 rounded-full flex items-center justify-center hover:bg-[#00CCFF] hover:text-zinc-900 transition-all cursor-pointer hover:-translate-y-1">
                              <span className="font-bold">in</span>
                          </div>
                          <div className="w-10 h-10 bg-zinc-900 border border-white/5 rounded-full flex items-center justify-center hover:bg-[#00CCFF] hover:text-zinc-900 transition-all cursor-pointer hover:-translate-y-1">
                              <span className="font-bold">f</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    {/* UPDATED FOOTER */}
                    <div className="border-t border-white/5 mt-12 pt-8 text-center text-[10px] text-zinc-600 uppercase tracking-widest flex flex-col gap-3 items-center">
                      <p>&copy; {new Date().getFullYear()} Kavanagh Crane Hire. All rights reserved.</p>
                      <div className="w-8 h-px bg-zinc-800"></div>
                      <p className="text-zinc-700">Created by Dave Maher</p>
                    </div>
                  </div>
                </footer>
              </div>
            </div>
          );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
