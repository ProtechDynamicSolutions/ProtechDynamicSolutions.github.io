import React, { useState, useEffect } from 'react';
import { Star, Zap, Trophy, Edit3, X, Download, Disc } from 'lucide-react';

// --- Custom Beyblade Graphics ---

// Max's Infinite Achilles (Based on your photo: Blue Chassis, Red Core, Silver Shields, Gold Center)
const InfiniteAchillesIcon = ({ className, spinning }) => (
  <svg viewBox="0 0 100 100" className={className} style={spinning ? {animation: 'spin 0.2s linear infinite'} : {}}>
    <defs>
      <linearGradient id="silverGrad" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stopColor="#e5e7eb" />
        <stop offset="50%" stopColor="#9ca3af" />
        <stop offset="100%" stopColor="#d1d5db" />
      </linearGradient>
      <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stopColor="#fcd34d" />
        <stop offset="100%" stopColor="#d97706" />
      </linearGradient>
    </defs>
    
    {/* 1. Blue Chassis (Outer Ring - Jagged) */}
    <path d="M50 2 L65 15 L85 10 L80 30 L98 50 L80 70 L85 90 L65 85 L50 98 L35 85 L15 90 L20 70 L2 50 L20 30 L15 10 L35 15 Z" 
          fill="#0ea5e9" stroke="#0284c7" strokeWidth="2" opacity="0.9"/>
    
    {/* 2. Red Core (Inner Circle) */}
    <circle cx="50" cy="50" r="32" fill="#dc2626" stroke="#991b1b" strokeWidth="2" />
    
    {/* 3. Silver Shields (The metal weights from photo) */}
    {/* Left Shield */}
    <path d="M20 35 L35 35 L30 65 L20 65 Z" fill="url(#silverGrad)" stroke="#4b5563" strokeWidth="1" />
    {/* Right Shield */}
    <path d="M80 35 L65 35 L70 65 L80 65 Z" fill="url(#silverGrad)" stroke="#4b5563" strokeWidth="1" />
    
    {/* 4. Gold Center Emblem (The 'A' shape/Mask) */}
    <path d="M50 25 L65 40 L50 75 L35 40 Z" fill="url(#goldGrad)" stroke="#b45309" strokeWidth="1" />
    <path d="M50 25 L50 75" stroke="#b45309" strokeWidth="1" />
    
    {/* 5. Center Blue Gem */}
    <circle cx="50" cy="45" r="6" fill="#1e3a8a" stroke="#60a5fa" strokeWidth="2" />
  </svg>
);

// Ari's Bell Fire (Dynamite Belial - Black/Red/Gold)
const BellFireIcon = ({ className, spinning }) => (
  <svg viewBox="0 0 100 100" className={className} style={spinning ? {animation: 'spin 0.2s linear infinite'} : {}}>
    {/* 1. Black/Dark Chassis */}
    <path d="M50 5 L80 20 L95 50 L80 80 L50 95 L20 80 L5 50 L20 20 Z" 
          fill="#1c1917" stroke="#dc2626" strokeWidth="2" />
    
    {/* 2. Gold Wings */}
    <path d="M50 15 L70 30 L50 50 L30 30 Z" fill="#fbbf24" />
    <path d="M50 85 L70 70 L50 50 L30 70 Z" fill="#fbbf24" />
    <path d="M85 50 L70 70 L50 50 L70 30 Z" fill="#fbbf24" />
    <path d="M15 50 L30 70 L50 50 L30 30 Z" fill="#fbbf24" />

    {/* 3. Red Demon Eyes/Core */}
    <circle cx="50" cy="50" r="15" fill="#ef4444" stroke="#7f1d1d" strokeWidth="2" />
    <path d="M45 45 L55 55 M55 45 L45 55" stroke="black" strokeWidth="3" />
  </svg>
);

const ToothIcon = ({ className }) => (
  <svg viewBox="0 0 24 24" fill="currentColor" className={className}>
    <path d="M7 3c-1.5 0-3 1.5-3 4 0 2 1.5 3 1.5 6 0 3.5-1.5 5-3 8 0 .5.5 1 1 1h16c.5 0 1-.5 1-1-1.5-3-3-4.5-3-8 0-3 1.5-4 1.5-6 0-2.5-1.5-4-3-4-1.5 0-2.5 1-3.5 2.5C10.5 4 9.5 3 7 3z"/>
  </svg>
);

// --- Configuration & Helpers ---
const USERS = {
  MAX: { 
    id: 'max', 
    name: 'Max', 
    // Updated to match Infinite Achilles Photo
    color: 'bg-blue-600', 
    borderColor: 'border-yellow-400',
    ringColor: 'ring-blue-400',
    text: 'text-blue-100', 
    accent: '#FFD700', 
    iconChar: 'M',
    Graphic: InfiniteAchillesIcon,
    beyName: 'Infinite Achilles' 
  },
  ARI: { 
    id: 'ari', 
    name: 'Ari', 
    color: 'bg-red-600', 
    borderColor: 'border-stone-900', 
    ringColor: 'ring-red-500',
    text: 'text-red-100', 
    accent: '#000000',
    iconChar: 'A',
    Graphic: BellFireIcon,
    beyName: 'Bell Fire' 
  }
};

const getLast7Days = () => {
  const days = [];
  for (let i = 6; i >= 0; i--) {
    const d = new Date();
    d.setDate(d.getDate() - i);
    days.push(d);
  }
  return days;
};

const isFriday = (date) => date.getDay() === 5;
const isThursday = (date) => date.getDay() === 4;

const formatDateKey = (date) => date.toISOString().split('T')[0];

export default function App() {
  const [currentUser, setCurrentUser] = useState(null);
  const [adminMode, setAdminMode] = useState(false);
  const [showReward, setShowReward] = useState(false);
  const [celebration, setCelebration] = useState(null); 
  const [showThursdayPopup, setShowThursdayPopup] = useState(false);
  
  // --- Data State with Local Storage ---
  const [logs, setLogs] = useState(() => {
    const saved = localStorage.getItem('beyblade_logs');
    if (saved) return JSON.parse(saved);
    
    const initialLogs = {};
    const today = new Date();
    for(let i=1; i<=6; i++) {
        const d = new Date();
        d.setDate(today.getDate() - i);
        const key = formatDateKey(d);
        initialLogs[`max-${key}-am`] = true;
        initialLogs[`max-${key}-pm`] = true; 
        initialLogs[`ari-${key}-am`] = true;
        initialLogs[`ari-${key}-pm`] = true; 
    }
    return initialLogs;
  });

  useEffect(() => {
    localStorage.setItem('beyblade_logs', JSON.stringify(logs));
  }, [logs]);

  // --- Keyboard Listeners ---
  useEffect(() => {
    const handleKeyDown = (e) => {
      if (e.target.tagName === 'INPUT') return;
      if (e.key.toLowerCase() === 'm') setCurrentUser(USERS.MAX);
      if (e.key.toLowerCase() === 'a') setCurrentUser(USERS.ARI);
      if (e.key === 'Escape') setCurrentUser(null);
    };
    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, []);

  // --- Actions ---
  const triggerCelebration = (dateObj) => {
    const now = new Date();
    const isThursdayEvening = isThursday(now) && now.getHours() >= 17;
    
    setCelebration(isThursdayEvening ? 'thursday' : 'standard');

    if (isThursdayEvening) {
      setTimeout(() => setShowThursdayPopup(true), 1500);
    }

    setTimeout(() => setCelebration(null), 3000);
  };

  const toggleBrush = (userId, dateObj, slot) => {
    const dateKey = formatDateKey(dateObj);
    const entryKey = `${userId}-${dateKey}-${slot}`;
    const willBeChecked = !logs[entryKey];
    
    setLogs(prev => ({ ...prev, [entryKey]: willBeChecked }));

    if (willBeChecked) {
      triggerCelebration(dateObj);
    }
  };

  const calculateStreak = (userId) => {
    const days = getLast7Days();
    let streak = 0;
    days.forEach(day => {
      const k = formatDateKey(day);
      if (logs[`${userId}-${k}-am`] || logs[`${userId}-${k}-pm`]) {
        streak++;
      }
    });
    return streak;
  };

  const exportData = () => {
    let csvContent = "data:text/csv;charset=utf-8,Date,Blader,Time Slot,Result\n";
    const sortedKeys = Object.keys(logs).sort();
    sortedKeys.forEach(key => {
        if (logs[key]) {
            const [userId, date, slot] = key.split('-');
            const name = USERS[userId.toUpperCase()]?.name || userId;
            csvContent += `${date},${name},${slot.toUpperCase()},Burst Finish\n`;
        }
    });
    const encodedUri = encodeURI(csvContent);
    const link = document.createElement("a");
    link.setAttribute("href", encodedUri);
    link.setAttribute("download", "beyblade_battle_logs.csv");
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  };

  // --- Render Components ---

  const CelebrationOverlay = ({ type }) => {
    const particles = Array.from({ length: 30 }).map((_, i) => ({
      id: i,
      left: Math.random() * 100,
      delay: Math.random() * 0.5,
      speed: 1 + Math.random() * 2,
      icon: type === 'thursday' && i % 4 === 0 ? 'pizza' : (i % 2 === 0 ? 'zap' : 'star'),
      spinDirection: i % 2 === 0 ? 1 : -1
    }));

    return (
      <div className="fixed inset-0 z-50 pointer-events-none overflow-hidden">
        {particles.map(p => (
          <div
            key={p.id}
            className="absolute bottom-0 animate-launch-up"
            style={{
              left: `${p.left}%`,
              animationDuration: `${p.speed}s`,
              animationDelay: `${p.delay}s`,
              opacity: 0
            }}
          >
             {p.icon === 'pizza' && <div className="text-4xl animate-spin-slow">üç´</div>}
             {p.icon === 'zap' && <Zap className="w-8 h-8 text-yellow-300 drop-shadow-[0_0_10px_rgba(253,224,71,0.8)]" fill="currentColor" />}
             {p.icon === 'star' && <Star className="w-6 h-6 text-white drop-shadow-md" fill="white" />}
          </div>
        ))}
        <style>{`
          @keyframes launchUp {
            0% { transform: translateY(100vh) scale(0.5); opacity: 1; }
            50% { opacity: 1; }
            100% { transform: translateY(-20vh) scale(1.5); opacity: 0; }
          }
          .animate-launch-up {
            animation-name: launchUp;
            animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
            animation-fill-mode: forwards;
          }
          .animate-spin-fast {
            animation: spin 0.5s linear infinite;
          }
          .animate-spin-slow {
             animation: spin 3s linear infinite;
          }
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `}</style>
      </div>
    );
  };

  const ThursdayPopup = () => (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-in fade-in zoom-in duration-300">
      <div className="bg-gradient-to-br from-indigo-900 to-purple-900 rounded-3xl p-8 max-w-md w-full text-center border-4 border-yellow-400 shadow-[0_0_60px_rgba(168,85,247,0.6)] relative overflow-hidden">
         <div className="absolute inset-0 opacity-20" style={{backgroundImage: 'linear-gradient(0deg, transparent 24%, #ffffff 25%, #ffffff 26%, transparent 27%, transparent 74%, #ffffff 75%, #ffffff 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, #ffffff 25%, #ffffff 26%, transparent 27%, transparent 74%, #ffffff 75%, #ffffff 76%, transparent 77%, transparent)', backgroundSize: '50px 50px'}}></div>

         <button onClick={() => setShowThursdayPopup(false)} className="absolute top-4 right-4 text-white/50 hover:text-white">
           <X size={24} />
         </button>
         <h2 className="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-red-400 mb-2 uppercase italic tracking-wider">
           Hyper Flux!
         </h2>
         <div className="text-8xl mb-4 relative inline-block">
           <span className="animate-pulse">‚ö°</span>
           <div className="absolute inset-0 animate-ping opacity-50">‚ö°</div>
         </div>
         <p className="text-lg font-bold text-blue-100 mb-6 relative z-10">
           Power levels rising!<br/>
           Complete your mission tomorrow for the <span className="text-yellow-300">Ultimate Prize</span>!
         </p>
         <button onClick={() => setShowThursdayPopup(false)} className="bg-yellow-500 hover:bg-yellow-400 text-black font-black py-3 px-8 rounded-none skew-x-[-10deg] shadow-[5px_5px_0px_rgba(0,0,0,0.5)] transform transition hover:translate-x-1 hover:translate-y-1 hover:shadow-none relative z-10">
          CHARGE UP!
        </button>
      </div>
    </div>
  );

  const RewardModal = () => (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4 animate-in fade-in duration-300">
      <div className="bg-gradient-to-b from-slate-900 to-slate-800 rounded-2xl p-8 max-w-md w-full text-center border-y-8 border-yellow-500 shadow-[0_0_50px_rgba(234,179,8,0.5)] relative">
        <h2 className="text-5xl font-black text-white mb-2 tracking-tighter uppercase italic transform -rotate-2 drop-shadow-[0_4px_0_#b91c1c]">
          BURST FINISH!
        </h2>
        <div className="text-8xl my-8 animate-bounce">
          üèÜüç´
        </div>
        <p className="text-xl font-bold text-blue-200 mb-8 uppercase tracking-widest">
          Champion of the Week!
        </p>
        <button onClick={() => setShowReward(false)} className="w-full bg-red-600 hover:bg-red-500 text-white font-black py-4 rounded-xl text-2xl shadow-lg border-b-4 border-red-800 active:border-b-0 active:translate-y-1 transition-all">
          CLAIM TROPHY
        </button>
      </div>
    </div>
  );

  const UserSelection = () => (
    <div className="flex flex-col items-center justify-center min-h-[60vh] gap-8 animate-in slide-in-from-bottom-10 fade-in duration-500">
      <div className="text-center space-y-2">
        <h2 className="text-4xl font-black text-white italic drop-shadow-[0_0_15px_rgba(59,130,246,0.8)] tracking-widest uppercase">
          Select Blader
        </h2>
        <p className="text-blue-200 font-mono text-sm">Press 'M' or 'A' to Launch</p>
      </div>
      
      <div className="flex flex-wrap justify-center gap-8 md:gap-16 w-full max-w-3xl px-4">
        {Object.values(USERS).map((user) => (
          <button 
            key={user.id}
            onClick={() => setCurrentUser(user)}
            className={`
              group relative w-48 h-48 rounded-full shadow-[0_0_30px_rgba(0,0,0,0.5)]
              ${user.color} border-4 ${user.borderColor}
              hover:scale-110 hover:rotate-12 active:scale-95 transition-all duration-300
              flex flex-col items-center justify-center overflow-hidden
            `}
          >
            {/* The Beyblade Graphic */}
            <div className="absolute inset-0 p-2">
                <user.Graphic className="w-full h-full drop-shadow-xl" spinning={false} />
            </div>
            
            <div className="absolute bottom-6 bg-black/60 px-3 py-0.5 rounded text-[12px] text-white font-bold tracking-widest uppercase backdrop-blur-sm border border-white/20 z-10">
              {user.beyName}
            </div>
          </button>
        ))}
      </div>
    </div>
  );

  const Dashboard = () => {
    const weekDays = getLast7Days();
    const streak = calculateStreak(currentUser.id);
    const today = new Date();
    const todayKey = formatDateKey(today);
    const isFridayToday = isFriday(today);
    const hasFullStreak = streak >= 6; 
    const rewardAvailable = isFridayToday && hasFullStreak;

    return (
      <div className="w-full max-w-2xl mx-auto pb-24 animate-in zoom-in-95 duration-300">
        {/* Header */}
        <div className="flex items-center justify-between mb-6 bg-slate-900/80 p-4 rounded-xl border-l-4 border-r-4 border-t-0 border-b-0 border-white/20 shadow-lg backdrop-blur-md">
          <button 
            onClick={() => setCurrentUser(null)}
            className="flex items-center text-gray-400 font-bold hover:text-white hover:bg-white/10 px-3 py-2 rounded-lg transition uppercase text-sm tracking-wider"
          >
            ‚Üê Eject
          </button>
          <div className="flex items-center gap-4">
             <div className="text-right leading-tight">
               <div className={`font-black text-2xl uppercase tracking-widest italic ${currentUser.text}`}>
                 {currentUser.name}
               </div>
               <div className="text-xs text-gray-400 font-mono uppercase">
                  Beyblade: <span className="text-white">{currentUser.beyName}</span>
               </div>
             </div>
             {/* Small visual of their bey */}
             <div className={`w-14 h-14 rounded-full border-2 ${currentUser.borderColor} bg-slate-800 flex items-center justify-center shadow-[0_0_15px_currentColor]`}>
                <currentUser.Graphic className="w-full h-full p-1" />
             </div>
          </div>
        </div>

        {/* Main Action Area - "Stadium" */}
        <div className="bg-gradient-to-b from-gray-800 to-gray-900 rounded-[3rem] p-8 shadow-2xl border-4 border-gray-700 relative overflow-hidden mb-8">
            <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[80%] h-[80%] border-4 border-dashed border-white/5 rounded-full pointer-events-none"></div>
            <div className="absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white/5 via-transparent to-transparent pointer-events-none"></div>
            
            <div className="text-center mb-8 relative z-10">
                <h3 className="text-2xl font-black text-white uppercase italic tracking-wider drop-shadow-md">
                  Battle Zone
                </h3>
            </div>

            <div className="grid grid-cols-2 gap-6 relative z-10">
                {['am', 'pm'].map((slot) => {
                    const isDone = logs[`${currentUser.id}-${todayKey}-${slot}`];
                    return (
                        <button
                            key={slot}
                            onClick={() => toggleBrush(currentUser.id, today, slot)}
                            className={`
                                relative h-48 rounded-full border-8 transition-all duration-500 transform
                                flex flex-col items-center justify-center gap-2 group overflow-hidden
                                ${isDone 
                                    ? `bg-gradient-to-br from-yellow-300 via-orange-400 to-red-500 border-yellow-200 scale-100 shadow-[0_0_30px_rgba(250,204,21,0.6)]` 
                                    : 'bg-gray-700/50 border-gray-600 hover:border-blue-400 hover:bg-gray-700 hover:scale-105 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)]'
                                }
                            `}
                        >
                            {isDone ? (
                                <>
                                    <div className="absolute inset-0 bg-white/20 animate-spin-slow"></div>
                                    <div className="relative w-28 h-28">
                                        <currentUser.Graphic className="w-full h-full" spinning={true} />
                                    </div>
                                    <span className="font-black text-white text-xl italic drop-shadow-md uppercase -mt-2 relative z-10">
                                      BURST!
                                    </span>
                                </>
                            ) : (
                                <>
                                    <div className="text-gray-500 group-hover:text-blue-400 transition-colors uppercase font-black text-sm tracking-widest">
                                        {slot} Launch
                                    </div>
                                    <Disc className="w-12 h-12 text-gray-500 group-hover:text-white transition-colors group-hover:animate-spin" />
                                    <span className="text-xs text-gray-600 font-mono mt-1 group-hover:text-blue-300">
                                        Tap to Rip
                                    </span>
                                </>
                            )}
                        </button>
                    )
                })}
            </div>
        </div>

        {/* Weekly Tracker */}
        <div className="bg-black/40 rounded-xl p-6 backdrop-blur-md border border-white/10 shadow-xl">
            <div className="flex items-center justify-between mb-4">
                <h3 className="text-gray-300 font-bold uppercase tracking-widest text-xs flex items-center gap-2">
                    <Trophy className="w-4 h-4 text-yellow-500"/> 
                    Tournament Record (7 Days)
                </h3>
                {rewardAvailable && (
                    <button onClick={() => setShowReward(true)} className="bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-1 skew-x-[-10deg] text-xs font-black uppercase animate-pulse shadow-lg border-b-2 border-yellow-700">
                        Prize Ready!
                    </button>
                )}
            </div>

            <div className="grid grid-cols-7 gap-2">
                {weekDays.map((day, idx) => {
                    const dateKey = formatDateKey(day);
                    const isAm = logs[`${currentUser.id}-${dateKey}-am`];
                    const isPm = logs[`${currentUser.id}-${dateKey}-pm`];
                    const complete = isAm && isPm;
                    const any = isAm || isPm;
                    const dayLetter = day.toLocaleDateString('en-UK', { weekday: 'narrow' });
                    
                    return (
                        <div key={idx} className="flex flex-col items-center gap-2">
                            <span className="text-gray-500 text-[10px] font-bold uppercase">{dayLetter}</span>
                            <div 
                                onClick={() => adminMode && toggleBrush(currentUser.id, day, 'am')} 
                                className={`
                                    w-full aspect-square rounded-lg flex items-center justify-center relative transition-all overflow-hidden
                                    ${adminMode ? 'cursor-pointer hover:ring-2 ring-white' : ''}
                                    ${complete 
                                        ? 'bg-transparent shadow-[0_0_10px_rgba(59,130,246,0.6)]' 
                                        : any 
                                            ? `bg-gray-700 border border-gray-600 opacity-80` 
                                            : 'bg-black/50 border border-white/5'
                                    }
                                `}
                            >
                                {complete ? (
                                    <currentUser.Graphic className="w-full h-full" spinning={true} />
                                ) : any ? (
                                    <div className="w-2 h-2 bg-gray-400 rounded-full"></div>
                                ) : (
                                    <div className="w-1 h-1 bg-gray-700 rounded-full"></div>
                                )}
                            </div>
                        </div>
                    );
                })}
            </div>
             {adminMode && (
                <div className="mt-4 text-center text-xs text-red-400 font-mono bg-black/40 p-2 rounded border border-red-900/50">
                    [SYSTEM]: REFEREE MODE ACTIVE. EDITING LOGS.
                </div>
            )}
        </div>
      </div>
    );
  };

  return (
    <div className="min-h-screen bg-[#0f172a] font-sans selection:bg-blue-500 relative overflow-x-hidden text-slate-200">
      <div className="fixed inset-0 pointer-events-none opacity-20" style={{backgroundImage: `linear-gradient(#334155 1px, transparent 1px), linear-gradient(90deg, #334155 1px, transparent 1px)`, backgroundSize: '40px 40px'}}></div>
      <div className="fixed inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/20 via-[#0f172a] to-[#0f172a] pointer-events-none"></div>

      {celebration && <CelebrationOverlay type={celebration} />}
      {showReward && <RewardModal />}
      {showThursdayPopup && <ThursdayPopup />}

      <div className="relative z-10 p-4 md:p-8">
        <header className="text-center mb-8 pt-6">
            <h1 className="text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-b from-blue-400 via-blue-200 to-white drop-shadow-[0_0_10px_rgba(59,130,246,0.5)] italic uppercase tracking-tighter transform -skew-x-6">
                BEYBLADE BURST
            </h1>
            <h2 className="text-xl md:text-2xl font-bold text-red-500 uppercase tracking-[0.5em] mt-2 drop-shadow-lg">
                Tooth Battle
            </h2>
        </header>

        {currentUser ? <Dashboard /> : <UserSelection />}
      </div>

      <footer className="fixed bottom-0 left-0 w-full p-4 flex justify-center z-20 pointer-events-none">
        <div className={`
             pointer-events-auto flex items-center gap-2 px-6 py-2 rounded-none skew-x-[-10deg] backdrop-blur-md transition-all border-t-2
            ${adminMode ? 'bg-red-600/90 border-red-400 text-white shadow-[0_0_20px_rgba(220,38,38,0.5)] translate-y-0' : 'bg-black/40 border-gray-700 text-gray-500 translate-y-1/2 hover:translate-y-0'}
        `}>
          {adminMode && (
             <button onClick={exportData} className="flex items-center gap-2 border-r border-red-400 pr-4 mr-4 hover:text-yellow-300 transition-colors">
                <Download className="w-4 h-4" />
                <span className="text-xs font-bold uppercase tracking-widest">Download CSV</span>
             </button>
          )}

          <button onClick={() => setAdminMode(!adminMode)} className="flex items-center gap-2 text-xs font-bold uppercase tracking-widest">
              {adminMode ? <X className="w-3 h-3" /> : <Edit3 className="w-3 h-3" />}
              {adminMode ? 'EXIT REFEREE MODE' : 'WBBA REFEREE'}
          </button>
        </div>
      </footer>
    </div>
  );
}


